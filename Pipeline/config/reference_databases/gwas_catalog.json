{
    "file": {
        "path": "$DATA_DIR/NHGRI",
        "file": "gwas_catalog_v1.0.2-associations_e112_r2024-09-22",
        "cadd_path": "$DATA_DIR/CADD",
        "seqrepo_proxy_path": "$SHARED_DATA_DIR/seqrepo/2021-01-29/",
        "consequence_ranking_file": "$PROJECT_HOME/AnnotatedVDB/Load/data/custom_consequence_ranking.txt",
        "chromosome_map": "$PROJECT_HOME/GenomicsDBData/Load/data/chr_map_gencode36_grch38_p13.txt"
    },
    "external_database": {
        "name": "NHGRI-EBI GWAS Catalog",
        "description": "The NHGRI-EBI GWAS Catalog is a catalog of published genome-wide association studies, assaying at >100,000 SNPs and all SNP-trait associations with p-values &lt; 1.0 x 10<sup>-5</sup>.",
        "version": "v1.0.2-associations_e112_r2024-09-22",
        "release_date": "2024-09-22",
        "id_url": "https://www.ebi.ac.uk/gwas/",
        "download_url": "https://www.ebi.ac.uk/gwas/docs/file-downloads",
        "accession": "NHGRI_GWAS_CATALOG",
        "type": "Genetic variation"
    },
    "preprocess": [
        {
            "plugin": {
                "name": "GenomicsDBData::Load::Plugin::InsertProtocolAppNode",
                "parameters": {
                    "type": "Genetic variation",
                    "subtype": "GWAS summary statistics",
                    "description": "@external_database.description",
                    "extDbRlsSpec": "@external_database.name|@external_database.version",
                    "sourceId": "@external_database.accession",
                    "name": "@external_database.name"
                }
            }
        },
        {
            "script": {
                "name": "clean_NHGRI_gwas_catalog.py",
                "parameters": {
                    "rawFile": "@file.file",
                    "genomeBuild": "GRCh38",
                    "log2stderr": true
                }
            }
        },
        {
            "script": {
                "name": "db_map_variants.py",
                "parameters": {
                    "inputFile": "@file.file+.clean",
                    "outputDir": "@file.path/preprocess",
                    "maxConnections": 20,
                    "logAfter": 10000,
                    "chunkSize": 1000,
                    "useMarker": true,
                    "allHits": true,
                    "overwrite": true,
                    "log2stderr": true
                }
            }
        }
    ],
    "load": [
        {
            "comment": "'resume' parameter will check before each insert;handle all the duplicates",
            "plugin": {
                "name": "GenomicsDBData::Load::Plugin::LoadVariantGWASResult",
                "parameters": {
                    "file": "@file.file+-preprocess.txt",
                    "sourceId": "@external_database.accession",
                    "fileDir": "@file.path",
                    "vepWebhook": "$WEBHOOK_SERVER/hooks/vep",
                    "seqrepoProxyPath": "@file.seqrepo_proxy_path",
                    "adspConsequenceRankingFile": "@file.consequence_ranking_file",
                    "liftOverChainFile": "@file.chain_file",
                    "remapAssemblies": "GCF_000001405.25|GCF_000001405.26",
                    "caddDatabaseDir": "@file.cadd_path",
                    "testAllele": "test_allele",
                    "refAllele": "ref_allele",
                    "pvalue": "pvalue",
                    "frequency": "frequency",
                    "genomeBuild": "GRCh38",
                    "marker": "marker",
                    "position": "position",
                    "chromosome": "chromosome",
                    "mapThruMarker": true,
                    "allowAlleleMismatches": true,
                    "resume": true,
                    "genomeWideSignificanceThreshold": "1e-6",
                    "restrictedStats": {
                        "other": [
                            "DATE ADDED TO CATALOG",
                            "PUBMEDID",
                            "FIRST AUTHOR",
                            "DATE",
                            "JOURNAL",
                            "LINK",
                            "STUDY",
                            "DISEASE/TRAIT",
                            "INITIAL SAMPLE SIZE",
                            "REPLICATION SAMPLE SIZE",
                            "REGION",
                            "REPORTED GENE(S)",
                            "MAPPED_GENE",
                            "UPSTREAM_GENE_ID",
                            "DOWNSTREAM_GENE_ID",
                            "SNP_GENE_IDS",
                            "UPSTREAM_GENE_DISTANCE",
                            "DOWNSTREAM_GENE_DISTANCE",
                            "STRONGEST SNP-RISK ALLELE",
                            "SNPS",
                            "MERGED",
                            "SNP_ID_CURRENT",
                            "CONTEXT",
                            "INTERGENIC",
                            "OR or BETA",
                            "95% CI (TEXT)",
                            "PLATFORM [SNPS PASSING QC]",
                            "CNV",
                            "MAPPED_TRAIT",
                            "MAPPED_TRAIT_URI",
                            "STUDY ACCESSION",
                            "GENOTYPING TECHNOLOGY"
                        ]
                    }
                }
            }
        }
    ]
}