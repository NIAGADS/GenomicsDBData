{
  "file": {
      "path": "$DATA_DIR/ADSP/Annotation",
      "consequence_ranking": "$DATA_DIR/ADSP/Annotation/custom_consequence_ranking.txt",
      "vcf_directory": "$DATA_DIR/ADSP/Annotation/VCF",
      "output_directory": "$DATA_DIR/ADSP/Annotation/VEP",
      "vep_cache": "$DATA_DIR/VEP_CACHE",
      "fasta": "$DATA_DIR/VEP_CACHE/Homo_sapiens.GRCh37.75.dna.primary_assembly.fa"
    },
    "external_database": {
	"name": "ADSP Annotation Pipeline",
	"version": "VEP 80",
	"release_date": "2019-04-01",
	"id_url": "https://www.niagads.org/datasets/ng00061",
	"description": "Predicted consequence and associated information for all revelant Ensembl transcript models of dbSNP b151, WES Release 3 Dataset, WGS V1 Dataset, and WES Release 3 Small Indels for GRCh37.p13, using the Ensembl VEP (v80) software package in accordance with the ADSP annotation pipeline (see NIAGADS Accession NG00061 for more information).",
	"accession": "NG00061",
	"type": "Function analysis"
    },
    "foreach": [
	{"chr1" : {"chr": "1", "input_file": "@file.vcf_directory/chr1.vcf", "output_file": "@file.output_directory/chr1.json", "vepResultFile": "@file.output_directory/chr1.json", "stats_file": "@file.output_directory/chr1_stats.txt"}},
	{"chr2" : {"chr": "2", "input_file": "@file.vcf_directory/chr2.vcf", "output_file": "@file.output_directory/chr2.json", "vepResultFile": "@file.output_directory/chr2.json", "stats_file": "@file.output_directory/chr2_stats.txt"}},
	{"chr3" : {"chr": "3", "input_file": "@file.vcf_directory/chr3.vcf", "output_file": "@file.output_directory/chr3.json", "vepResultFile": "@file.output_directory/chr3.json", "stats_file": "@file.output_directory/chr3_stats.txt"}},
	{"chr4" : {"chr": "4", "input_file": "@file.vcf_directory/chr4.vcf", "output_file": "@file.output_directory/chr4.json", "vepResultFile": "@file.output_directory/chr4.json", "stats_file": "@file.output_directory/chr4_stats.txt"}},
	{"chr5" : {"chr": "5", "input_file": "@file.vcf_directory/chr5.vcf", "output_file": "@file.output_directory/chr5.json", "vepResultFile": "@file.output_directory/chr5.json", "stats_file": "@file.output_directory/chr5_stats.txt"}},
	{"chr6" : {"chr": "6", "input_file": "@file.vcf_directory/chr6.vcf", "output_file": "@file.output_directory/chr6.json", "vepResultFile": "@file.output_directory/chr6.json", "stats_file": "@file.output_directory/chr6_stats.txt"}},
	{"chr7" : {"chr": "7", "input_file": "@file.vcf_directory/chr7.vcf", "output_file": "@file.output_directory/chr7.json", "vepResultFile": "@file.output_directory/chr7.json", "stats_file": "@file.output_directory/chr7_stats.txt"}},
	{"chr8" : {"chr": "8", "input_file": "@file.vcf_directory/chr8.vcf", "output_file": "@file.output_directory/chr8.json", "vepResultFile": "@file.output_directory/chr8.json", "stats_file": "@file.output_directory/chr8_stats.txt"}},
	{"chr9" : {"chr": "9", "input_file": "@file.vcf_directory/chr9.vcf", "output_file": "@file.output_directory/chr9.json", "vepResultFile": "@file.output_directory/chr9.json", "stats_file": "@file.output_directory/chr9_stats.txt"}},
	{"chr10" : {"chr": "10", "input_file": "@file.vcf_directory/chr10.vcf", "output_file": "@file.output_directory/chr10.json", "vepResultFile": "@file.output_directory/chr10.json", "stats_file": "@file.output_directory/chr10_stats.txt"}},
	{"chr11" : {"chr": "11", "input_file": "@file.vcf_directory/chr11.vcf", "output_file": "@file.output_directory/chr11.json", "vepResultFile": "@file.output_directory/chr11.json", "stats_file": "@file.output_directory/chr11_stats.txt"}},
	{"chr12" : {"chr": "12", "input_file": "@file.vcf_directory/chr12.vcf", "output_file": "@file.output_directory/chr12.json", "vepResultFile": "@file.output_directory/chr12.json", "stats_file": "@file.output_directory/chr12_stats.txt"}},
	{"chr13" : {"chr": "13", "input_file": "@file.vcf_directory/chr13.vcf", "output_file": "@file.output_directory/chr13.json", "vepResultFile": "@file.output_directory/chr13.json", "stats_file": "@file.output_directory/chr13_stats.txt"}},
	{"chr14" : {"chr": "14", "input_file": "@file.vcf_directory/chr14.vcf", "output_file": "@file.output_directory/chr14.json", "vepResultFile": "@file.output_directory/chr14.json", "stats_file": "@file.output_directory/chr14_stats.txt"}},
	{"chr15" : {"chr": "15", "input_file": "@file.vcf_directory/chr15.vcf", "output_file": "@file.output_directory/chr15.json", "vepResultFile": "@file.output_directory/chr15.json", "stats_file": "@file.output_directory/chr15_stats.txt"}},
	{"chr16" : {"chr": "16", "input_file": "@file.vcf_directory/chr16.vcf", "output_file": "@file.output_directory/chr16.json", "vepResultFile": "@file.output_directory/chr16.json", "stats_file": "@file.output_directory/chr16_stats.txt"}},
	{"chr17" : {"chr": "17", "input_file": "@file.vcf_directory/chr17.vcf", "output_file": "@file.output_directory/chr17.json", "vepResultFile": "@file.output_directory/chr17.json","stats_file": "@file.output_directory/chr17_stats.txt"}},
	{"chr18" : {"chr": "18", "input_file": "@file.vcf_directory/chr18.vcf", "output_file": "@file.output_directory/chr18.json", "vepResultFile": "@file.output_directory/chr18.json","stats_file": "@file.output_directory/chr18_stats.txt"}},
	{"chr19" : {"chr": "19", "input_file": "@file.vcf_directory/chr19.vcf", "output_file": "@file.output_directory/chr19.json", "vepResultFile": "@file.output_directory/chr19.json", "stats_file": "@file.output_directory/chr19_stats.txt"}},
	{"chr20" : {"chr": "20", "input_file": "@file.vcf_directory/chr20.vcf", "output_file": "@file.output_directory/chr20.json", "vepResultFile": "@file.output_directory/chr20.json", "stats_file": "@file.output_directory/chr20_stats.txt"}},
	{"chr21" : {"chr": "21", "input_file": "@file.vcf_directory/chr21.vcf", "output_file": "@file.output_directory/chr21.json", "vepResultFile": "@file.output_directory/chr21.json", "stats_file": "@file.output_directory/chr21_stats.txt"}},
	{"chr22" : {"chr": "22", "input_file": "@file.vcf_directory/chr22.vcf", "output_file": "@file.output_directory/chr22.json", "vepResultFile": "@file.output_directory/chr22.json", "stats_file": "@file.output_directory/chr22_stats.txt"}},
	{"chrX" : {"chr": "X", "input_file": "@file.vcf_directory/chrX.vcf", "output_file": "@file.output_directory/chrX.json", "vepResultFile": "@file.output_directory/chrX.json", "stats_file": "@file.output_directory/chrX_stats.txt"}},
	{"chrY" : {"chr": "Y", "input_file": "@file.vcf_directory/chrY.vcf", "output_file": "@file.output_directory/chrY.json", "vepResultFile": "@file.output_directory/chrY.json", "stats_file": "@file.output_directory/chrY_stats.txt"}},
	{"chrM" : {"chr": "M", "input_file": "@file.vcf_directory/chrM.vcf", "output_file": "@file.output_directory/chrM.json", "vepResultFile": "@file.output_directory/chrM.json","stats_file": "@file.output_directory/chrM_stats.txt"}}
    ],
    "preprocess": [
	{
	    "script": {
		"skip" : true,
		"name": "exportVariantsToVcf",
		"parameters": {
		    "directory": "@file.vcf_directory",
		    "vcfHeader": "$CONFIG_DIR/templates/grch37_vcf_header.txt"
		}
	    }
	},
	{
	    "foreach": true,
	    "script": {
		"name": "variant_effect_predictor.pl",
		"parameters": {
		    "input_file": "foreach",
		    "output_file": "foreach",
		    "dir_cache": "@file.vep_cache",
		    "cache": true,
		    "offline": true,
		    "chr": "foreach",
		    "stats_file": "foreach",
		    "stats_text": true,
		    "json": true,
		    "fork": "10",
		    "sift": "b",
		    "polyphen": "b",
		    "ccds": true,
		    "symbol": true,
		    "numbers": true,
		    "domains": true,
		    "regulatory": true,
		    "canonical": true,
		    "protein": true,
		    "biotype": true,
		    "tsl": true,
		    "pubmed": true,
		    "uniprot": true,
		    "variant_class": true,
		    "exclude_predicted": true,
		    "gencode_basic": true,
		    "af": true,
		    "max_af": true,
		    "af_1kg": true,
		    "af_esp": true,
		    "af_gnomad": true,
		    "af_exac": true,
		    "clin_sig_allele": 1,
		    "nearest": "gene"
		}
	    }
	}
    ],
    "load": [
	{
	    "plugin": {
		"skip": true,
		"name": "GenomicsDBData::Load::Plugin::InsertProtocolAppNode",
		"parameters" : {
		    "type": "Function analysis",
		    "subtype": "sequence_variant_effect",
		    "description": "@external_database.description+ Most severe consequences are ranked according to a custom ADSP ranking (see ^ADSP_VEP_METHOD^ for more information).",
		    "extDbRlsSpec": "@external_database.name|@external_database.version",
		    "sourceId" : "VEP",
		    "name": "@external_database.name|@external_database.version"
		}
	    }
	},
	{
	    "foreach": true,
	    "plugin": {
		"name": "GenomicsDBData::Load::Plugin::LoadVepResultFromJson",
		"parameters": {
		    "rankingFile": "@file.consequence_ranking",
		    "sourceId": "VEP",
		    "vepResultFile": "foreach"
		}
	    }
	}
    ]
}

